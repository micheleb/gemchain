(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,n,t){e.exports=t(28)},23:function(e,n,t){},24:function(e,n,t){},27:function(e,n,t){},28:function(e,n,t){"use strict";t.r(n);for(var a,r=t(0),o=t.n(r),c=t(13),l=t.n(c),i=t(7),u=t(30),f=t(15),m=t(31),s=t(32),v=t(9),b=t(8),E=t(5),d=t(2),g=t.n(d),j=(t(23),Array.from(Array(13),function(e,n){return n})),O=Array.from(Array(6),function(e,n){return n}),p=function(e,n){return"".concat(e,"-").concat(n)},h={},w=0,N=j;w<N.length;w++)for(var k=N[w],y=0,G=O;y<G.length;y++){var A=G[y];h[p(k,A)]={row:k,col:A}}var S,C=o.a.memo(function(e){var n;return o.a.createElement("span",{className:g()("Cell",(n={},Object(E.a)(n,"bg-".concat(e.color),void 0!==e.color),Object(E.a)(n,"blinking",e.blinking),n))},"\xa0")});!function(e){e[e.E=0]="E",e[e.NE=1]="NE",e[e.N=2]="N",e[e.NW=3]="NW"}(S||(S={}));var W=(a={},Object(E.a)(a,S.E,function(e){return p(e.row,e.col+1)}),Object(E.a)(a,S.NE,function(e){return p(e.row-1,e.col+1)}),Object(E.a)(a,S.N,function(e){return p(e.row-1,e.col)}),Object(E.a)(a,S.NW,function(e){return p(e.row-1,e.col-1)}),a),I=Object(r.forwardRef)(function(e,n){e.initialScenario&&e.initialScenario.forEach(function(e){return n=e.row,t=e.col,a=e.color,void(h["".concat(n,"-").concat(t)]={row:n,col:t,color:a});var n,t,a});var t=Object(r.useState)(h),a=Object(i.a)(t,2),c=a[0],l=a[1],u=Object(r.useState)(!1),f=Object(i.a)(u,2),m=f[0],s=f[1];Object(r.useImperativeHandle)(n,function(){return{addGem:function(e){l(Object(b.a)({},c,Object(E.a)({},p(e.row,e.col),e)))}}});var d=function(){return Object.values(c).forEach(function(e){e.moving=!1})},g=function(){for(var e=12;e>=0;e--)for(var n=0,t=O;n<t.length;n++){var a=t[n],r=c[p(e,a)],o=r.row,l=r.col,i=r.color,u=c[p(o+1,l)];i&&u&&!u.color&&(r.color=void 0,u.color=i,u.moving=!0)}},w=function e(n,t,a,r){var o=n.color;if(!n.moving){var l=[].concat(Object(v.a)(t),[n]);(void 0!==r?[r]:[S.E,S.NE,S.N,S.NW]).forEach(function(t){var r=W[t](n),i=c[r];i&&!i.moving&&i.color===o?e(i,Object(v.a)(l),a,t):l.length>=3&&a.push(Object(v.a)(l))})}};!function(e,n){var t=Object(r.useRef)();Object(r.useEffect)(function(){t.current=e},[e]),Object(r.useEffect)(function(){if(null!==n){var e=setInterval(function(){t.current()},n);return function(){return clearInterval(e)}}},[n])}(function(){m?(g(),Object.values(c).filter(function(e){return e.moving}).length||s(!1),d(),l(Object(b.a)({},c))):function(){var e=Object.values(c).filter(function(e){return e.blinking});return e&&e.forEach(function(e){e.blinking=!1,e.color=void 0}),e.length}()?s(!0):(g(),function(){for(var e=[],n=12;n>=0;n--)for(var t=0,a=O;t<a.length;t++){var r=a[t],o=c[p(n,r)];o&&o.color&&w(o,[],e)}var l=e.filter(function(e){return e.length>=3});l.length&&l.forEach(function(e){return e.forEach(function(e){e.blinking=!0})})}(),d(),l(Object(b.a)({},c)))},m?40:500);return o.a.createElement("div",{className:"Game","data-testid":"Game"},j.map(function(e,n){return function(e){return o.a.createElement("div",{key:"row-".concat(e),className:"Row"},O.map(function(n,t){return o.a.createElement(C,Object.assign({key:p(e,t)},c[p(e,t)]))}))}(n)}))}),R=(t(24),["blue","green","deepblue","orange","purple","yellow"]),B=function(e){var n=Object(r.useRef)({addGem:function(){return null}}),t=Object(r.useState)(R[0]),a=Object(i.a)(t,2),c=a[0],l=a[1],v=Object(r.useState)("0"),b=Object(i.a)(v,2),E=b[0],d=b[1];return o.a.createElement("div",{className:"App"},o.a.createElement(u.a,{className:"App-header"},o.a.createElement(f.a,{md:12},"Gemchain"," ",o.a.createElement("span",{role:"img","aria-label":"gem emoji"},"\ud83d\udc8e"))),o.a.createElement(u.a,null,o.a.createElement(f.a,{md:{span:6,offset:3},className:"GameContainer"},o.a.createElement(I,{ref:n,initialScenario:e.initialScenario})),o.a.createElement(f.a,{md:2},o.a.createElement(m.a,null,o.a.createElement(m.a.Group,null,o.a.createElement(m.a.Label,null,"Gem color"),o.a.createElement(m.a.Control,{as:"select",onChange:function(e){return l(e.currentTarget.value)},value:c},R.map(function(e){return o.a.createElement("option",{key:"opt-".concat(e)},e)}))),o.a.createElement(m.a.Group,null,o.a.createElement(m.a.Label,null,"Add gem to column"),o.a.createElement(m.a.Control,{as:"select",onChange:function(e){return d(e.currentTarget.value)},value:E},O.map(function(e,n){return o.a.createElement("option",{key:"opt-".concat(n)},n)}))),o.a.createElement(s.a,{variant:"secondary",onClick:function(){return n.current.addGem({col:parseInt(E,10),color:c,moving:!0,row:0})}},"Add")))))};t(27),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,1,2]]]);
//# sourceMappingURL=main.ebcc9ab2.chunk.js.map